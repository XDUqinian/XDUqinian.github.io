<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>并行计算机体系结构笔记 | 年雨冰季</title><meta name="author" content="七年"><meta name="copyright" content="七年"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="这是本学期的第一门闭卷考试，部分内容由我的研究生导师陈衡主讲，整理一下笔记。其实之前和老师每周对话的时候问了一下，老师说师兄们去年都考得挺好的。">
<meta property="og:type" content="article">
<meta property="og:title" content="并行计算机体系结构笔记">
<meta property="og:url" content="http://example.com/2023/11/12/parallel-computer-architecture/index.html">
<meta property="og:site_name" content="年雨冰季">
<meta property="og:description" content="这是本学期的第一门闭卷考试，部分内容由我的研究生导师陈衡主讲，整理一下笔记。其实之前和老师每周对话的时候问了一下，老师说师兄们去年都考得挺好的。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s1.imagehub.cc/images/2023/09/30/avatar.jpeg">
<meta property="article:published_time" content="2023-11-12T14:37:23.000Z">
<meta property="article:modified_time" content="2023-11-12T15:12:16.292Z">
<meta property="article:author" content="七年">
<meta property="article:tag" content="体系结构">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s1.imagehub.cc/images/2023/09/30/avatar.jpeg"><link rel="shortcut icon" href="/common/img/snow1.png"><link rel="canonical" href="http://example.com/2023/11/12/parallel-computer-architecture/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/./search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 七年","link":"链接: ","source":"来源: 年雨冰季","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '并行计算机体系结构笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2023-11-12 23:12:16'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s1.imagehub.cc/images/2023/09/30/avatar.jpeg" onerror="onerror=null;src='/common/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s1.imagehub.cc/images/2023/09/30/home_banner.jpeg')"><nav id="nav"><span id="blog-info"><a href="/" title="年雨冰季"><span class="site-name">年雨冰季</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">并行计算机体系结构笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-11-12T14:37:23.000Z" title="发表于 2023-11-12 22:37:23">2023-11-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-11-12T15:12:16.292Z" title="更新于 2023-11-12 23:12:16">2023-11-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">7.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>23分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="并行计算机体系结构笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>这是本学期的第一门闭卷考试，部分内容由我的研究生导师陈衡主讲，整理一下笔记。</p>
<p>其实之前和老师每周对话的时候问了一下，老师说师兄们去年都考得挺好的。</p>
<h2 id="一-概述"><a class="markdownIt-Anchor" href="#一-概述"></a> 一、概述</h2>
<p>计算机技术的发展需要<mark>计算机系统结构</mark>、硬件、软件、编程语言、高效应用算法通信技术等多方面发展。要改善计算机系统的性能，可以使用更合理、更快的硬件，也可以优化解决计算任务的算法，还可以使用<mark>多处理器计算机</mark>来解决特定任务。</p>
<p>硬件是物质基础，也是改善计算机性能最关键的因素，随着微电子技术的发展，芯片的集成度和处理速度日新月异。而<mark>计算机系统结构</mark>是改善计算机性能的极其重要因素，通过合理的新方法设计和构成综合性能指标最佳的计算机系统，可以最大限度地发挥硬件的内在潜力。</p>
<p>如果说硬件决定了计算机性能的上限，那么计算机系统结构则使得计算机的实际性能向着这个上限去逼近。</p>
<p>如何才能使计算机获得更强的计算能力？一方面当然是从硬件角度，增加处理器和存储部件的速度，但这会受到光速、热力学定律、处理器制造工艺以及制造成本的限制；另一方面，可以采用<mark>并行处理技术</mark>，连接多个处理器，使用它们合在一起的并行计算能力。</p>
<p><strong>并行处理技术可以构建高性能的计算机</strong>。</p>
<p><mark>时间</mark>并行的角度上，<mark>流水线技术</mark>使得功能部件得到充分利用，提高吞吐率，提高 n 个类似任务的处理速度。</p>
<p><mark>空间</mark>并行角度上，<mark>超标量和多处理机技术</mark>使得各部件并行协同工作，将一个任务划分成 n 个子任务/协同处理，提高一个任务的处理速度。</p>
<p><strong>并行处理技术可以很好地解决单个处理器瓶颈问题</strong>。</p>
<p>单核中性能变为原来的两倍，耗能变为原来的四倍。而多核可以在获取同样性能的同时，<mark>减少能量损耗</mark>。</p>
<p>全球高性能计算机性能排名 top500 第一名是 <mark>Frontier</mark> 。</p>
<p>目前计算机性能不足以满足应用要求，应用需要计算机解决的问题越来越复杂，规模也越来越大。</p>
<p>从传统 MPP 到集群/机器群再到虚拟现实、云计算等，网络技术的发展促进了计算机系统结构的发展。网络技术发展还促生了新的应用模式向信息化社会发展，大众而不是少数科学家也将成为高性能计算能力的使用者。</p>
<p>并行计算机将一个任务划分成多个子任务分别在多个处理器或计算机上同时处理，提高运算速度，突破单机系统性能的极限。容错计算机系统即使单个处理机节点故障，整个系统也可以继续降级使用，得到高可靠性。企业管理数据库系统通过共用存储器、大容量辅助外村和输入/输出设备，实现资源共享和协同。</p>
<h2 id="二-相关理论基础"><a class="markdownIt-Anchor" href="#二-相关理论基础"></a> 二、相关理论基础</h2>
<h3 id="计算机的并行性"><a class="markdownIt-Anchor" href="#计算机的并行性"></a> 计算机的并行性</h3>
<p>并行性措施使计算机逐步由低性能向高性能，计算机系统结构由低级向高级发展。</p>
<p>从执行程序的角度：</p>
<ul>
<li>指令内部并行
<ul>
<li>一条指令内部各个<mark>微操作之间</mark>的并行。</li>
</ul>
</li>
<li>指令间的并行
<ul>
<li>多条指令的并行执行，如<mark>超标量处理</mark>、<mark>超长指令处理</mark>等。</li>
</ul>
</li>
<li>任务或进程之间的并行</li>
<li>作业或程序之间的并行
<ul>
<li><mark>企业管理系统 MIS</mark>、<mark>分布式处理</mark>等</li>
</ul>
</li>
</ul>
<p>并行性开发的途径：通过合理有效的方法，提高速度和吞吐率。</p>
<ul>
<li><mark>时间</mark>重叠：重叠<mark>流水线</mark>的工作方式。</li>
<li><mark>空间</mark>重叠：重复设置<mark>硬件资源</mark>来提高可靠性或性能。
<ul>
<li>早期受限于硬件价格，资源重复的多机系统以提高可靠性为主。</li>
<li>现在的并行计算机和多机系统被大量用于提高系统的<mark>计算速度</mark>。</li>
</ul>
</li>
<li><mark>用户</mark>重叠：多用户<mark>资源共享</mark>，提高系统资源利用率。</li>
</ul>
<h3 id="计算机体系结构"><a class="markdownIt-Anchor" href="#计算机体系结构"></a> 计算机体系结构</h3>
<ul>
<li>基于<mark>指令流</mark>的体系结构：
<ul>
<li>指令由操作码和数据地址码组成。</li>
<li>指令流包括操作流与数据流，按控制流原理工作。</li>
<li>最基本最灵活的体系结构。</li>
<li>算法按<mark>时间映射</mark>成程序，<mark>难以实现大规模并行</mark>。</li>
</ul>
</li>
<li>基于数据流的体系结构：
<ul>
<li>面向单个算法设计，完成<mark>固定功能</mark>，最不灵活但最快。</li>
<li>流件由访问地址与地址操作组成，无数据操作命令。</li>
<li>算法按<mark>静态空间映射</mark>成 ASIC 电路，在数据流的过程中完成计算。</li>
</ul>
</li>
<li>基于构令流计算的体系结构：
<ul>
<li>提高了<mark>硬件的可重用性</mark>，前边的两种基于<mark>程序实现可重用性</mark>。</li>
<li>静态可重构：一次上电，全芯片烧写。</li>
<li>动态可重构：根据应用不同区域动态烧写。</li>
<li>具有指令流计算体系结构的灵活性，接近基于数据流计算体系结构的高效性。</li>
<li>算法按<mark>动态空间映射</mark>成 RC Device 电路，在构令流的过程中完成数据流计算。</li>
</ul>
</li>
</ul>
<p>时间映射模式工作的体系结构灵活、通用，但并行度有限，而空间映射模式工作的体系结构可以解决算法并行限制，扩大并行程度。<mark>并行、混合实现</mark>是未来发展趋势，一方面是从性能、成本、能耗角度考虑，另一方面是从自然问题求解是“时间+空间”的处理过程的角度考虑。</p>
<h3 id="概念分类模型"><a class="markdownIt-Anchor" href="#概念分类模型"></a> 概念分类模型</h3>
<h4 id="flynn-分类法"><a class="markdownIt-Anchor" href="#flynn-分类法"></a> Flynn 分类法</h4>
<ul>
<li>SISD 单指令流单数据流
<ul>
<li>由程序生成的一个单指令流，在任意时刻处理单独数据项。</li>
</ul>
</li>
<li>SIMD 单指令流多数据流
<ul>
<li>多 PU 执行相同命令，处理不同的数据。</li>
<li>如 GPU 下的矩阵向量计算。</li>
</ul>
</li>
<li>MISD 多指令流单数据流
<ul>
<li>每个PU执行不同指令，处理相同数据。</li>
<li>异构系统或流水处理。</li>
</ul>
</li>
<li>MIMD 多指令流多数据流
<ul>
<li>每个 PU 执行不同程序，产生不同指令流，处理不同的数据。</li>
</ul>
</li>
</ul>
<p>Flynn 分类只能描述算法时间映射的基于指令流的并行计算。</p>
<h3 id="并行计算机结构的技术模型"><a class="markdownIt-Anchor" href="#并行计算机结构的技术模型"></a> 并行计算机结构的技术模型</h3>
<p>基于指令流计算的并行计算机实现分类：</p>
<ul>
<li>并行向量处理机 PVP
<ul>
<li><mark>频繁访存</mark>，经过互连网访问 SM。SM、互连网络会成为瓶颈。</li>
<li><mark>交叉开关</mark>增加了网络延迟。</li>
<li><mark>扩展节点</mark>需要增加互连开关，极其困难。</li>
</ul>
</li>
<li>对称多处理机 SMP
<ul>
<li>每个处理器可同等地访问 SM、I/O 及 OS 服务。</li>
<li>使用<mark>高速缓存</mark>，有利于缓解 SM、互连瓶颈，开发较高并行度。</li>
<li>共享存储使得系统中的 P/C 不能太多，总线与交叉开关也难以扩展。</li>
</ul>
</li>
<li>大规模并行处理机 MPP
<ul>
<li>处理节点采用<mark>商品微处理器</mark>，缓解<mark>存储瓶颈</mark>。</li>
<li>有物理上的<mark>分布式局部存储器</mark>，解决<mark>存储瓶颈</mark>。</li>
<li>采用<mark>高通信带宽</mark>及低延迟的定制互连网络，解决<mark>互连瓶颈</mark>。</li>
<li>异步的 MIMD 机，程序由多个进程构成，每个进程都有私有空间，由进程<mark>传递消息</mark>，通过优化数据局部性，可缓解互连瓶颈。</li>
<li>能扩放至成百上千个处理器。</li>
</ul>
</li>
</ul>
<p>PVP、SMP 的可编程性好，可扩展性差；MPP 可编程性差，可扩展性好。</p>
<ul>
<li>分布共享存储多处理机 DSM
<ul>
<li>高速缓存目录 DIR 用于支持分布式存储的数据一致性、共享</li>
<li>DSM 在物理上由分布在各节点的 LM（本地内存） 形成一个共享存储器，对用户而言形成了一个单地址的编址空间。</li>
<li>比 MPP 编程容易。</li>
</ul>
</li>
<li>工作站集群 COW
<ul>
<li>最低成本的变形的 MPP</li>
<li>节点都属完整的工作站 PC 或 SMP</li>
<li>节点通过低成本商品网络互连</li>
<li>节点内有本地磁盘（MPP 无）</li>
<li>节点内<mark>网络接口松散耦合</mark>到 I/O 总线上（MPP 网络接口连到存储总线上，<mark>网络接口紧耦合</mark>）</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>属性</th>
<th>PVP</th>
<th>SMP</th>
<th>MPP</th>
<th>DSM</th>
<th>COW</th>
</tr>
</thead>
<tbody>
<tr>
<td>处理器类型</td>
<td>专用定制</td>
<td>商用</td>
<td>商用</td>
<td>商用</td>
<td>商用</td>
</tr>
<tr>
<td>互连网络</td>
<td>定制交叉开关</td>
<td>总线/交叉开关</td>
<td>定制网络</td>
<td>定制网络</td>
<td>商用网络</td>
</tr>
<tr>
<td>系统存储器</td>
<td>集中共享</td>
<td>集中共享</td>
<td>分布非共享</td>
<td>分布共享</td>
<td>分布非共享</td>
</tr>
<tr>
<td>地址空间</td>
<td>单地址空间</td>
<td>单地址空间</td>
<td>多地址空间</td>
<td>单地址空间</td>
<td>多地址空间</td>
</tr>
<tr>
<td>通信机制</td>
<td>共享变量</td>
<td>共享变量</td>
<td>消息传递</td>
<td>共享变量</td>
<td>消息传递</td>
</tr>
<tr>
<td>结构类型</td>
<td>MIMD</td>
<td>MIMD</td>
<td>MIMD</td>
<td>MIMD</td>
<td>MIMD</td>
</tr>
<tr>
<td>代表机器</td>
<td>Cray C-90、Cray T-90、银河1号</td>
<td>IBM R50、SGI  Power、曙光1号</td>
<td>Inter Paragon、IBM BlueGen、曙光-1000、太湖之光</td>
<td>standford DASH、Crayon T 3D</td>
<td>Berkeley NOW、Alpha Farm、天河1、2号</td>
</tr>
<tr>
<td>访存模型</td>
<td>UMA</td>
<td>UMA</td>
<td>NORMA</td>
<td>NUMA</td>
<td>NORMA</td>
</tr>
</tbody>
</table>
<h3 id="并行计算机的访存模型"><a class="markdownIt-Anchor" href="#并行计算机的访存模型"></a> 并行计算机的访存模型</h3>
<ul>
<li>均匀存储访问模型 UMA
<ul>
<li>特点：
<ul>
<li>共享物理存储器、单一地址空间。</li>
<li>访问任何存储字<mark>访问延迟一致</mark>（均匀）。</li>
<li>每台处理器可带有高速缓冲 Cache。</li>
<li>外设也可以一定形式共享。</li>
</ul>
</li>
<li>由于高度共享资源，称为<mark>紧耦合结构</mark>，技术实现有：
<ul>
<li>对称多处理机 SMP ：所有<mark>处理机同等访问</mark>所有 I/O 设备，同样地执行程序。</li>
<li>非对称多处理机：<mark>主处理器</mark>执行 OS 并操纵 I/O，<mark>从处理器</mark>只在主处理器监控之下执行用户代码。</li>
</ul>
</li>
<li>UMA 适用于通用或分时应用。</li>
</ul>
</li>
<li>非均匀存储访问模型 NUMA
<ul>
<li>特点：
<ul>
<li><strong>地址空间统一编址</strong>：存储器物理上分布在不同位置，所有存储器的集合组成全局地址空间。</li>
<li><strong>各处理器访问时间不同</strong>：<mark>非均一内存访问</mark>。访问本地存储器或群内共享存储器较快，访问外地存储器或全局共享存储器较慢。</li>
</ul>
</li>
<li>全高速缓存存储访问模型 COMA
<ul>
<li>无存储层次结构，全部高速缓存构成了全局地址空间。</li>
<li>利用分布的<mark>高速缓存目录D</mark>进行远程高速缓存的访问。</li>
<li>COMA 中的高速缓存容量一般都大于2级高速缓存的容量。</li>
<li>使用 COMA 时，数据开始时可任意分配，在运行时它最终被迁移到要用到它的地方。</li>
</ul>
</li>
<li>高速缓存一致性非均匀存储访问模型 CC-NUMA
<ul>
<li>使用基于目录的高速缓存一致性协议。</li>
<li>保留 SMP 结构易于编程的特定，也改善了 SMP 可扩展性问题。</li>
<li>实际上是一个分布共享存储的 DSM 多处理机系统。</li>
<li>程序员无需明确地在节点上分配数据，系统软硬件会自动将数据拷贝到它被使用的地方。</li>
<li>网络的主要通信是为<mark>高速缓存的一致性维护</mark>。</li>
</ul>
</li>
</ul>
</li>
<li>非远程存储访问模型 NORMA
<ul>
<li>所有存储器都是私有的，仅能由本地处理器所访问。</li>
<li>以小溪通信方式完成信息交换，对远程 Mem 不能直接访问。</li>
<li>没有网络、访存瓶颈，且不用维护数据一致性等，可以是巨大规模。</li>
</ul>
</li>
</ul>
<h3 id="并行计算性能分析模型"><a class="markdownIt-Anchor" href="#并行计算性能分析模型"></a> 并行计算性能分析模型</h3>
<h4 id="amdahl-定律"><a class="markdownIt-Anchor" href="#amdahl-定律"></a> Amdahl 定律</h4>
<p>适用于<mark>固定负载</mark>问题，即任务规模不变，分析计算速度的加速比。</p>
<ul>
<li>Tex ：系统改善后的全部执行时间。</li>
<li>T ：系统改善前的全部执行时间。</li>
<li>r：能进行改善部分所占的比例。</li>
<li>a：能进行改善部分改善的程度。</li>
</ul>
<p>改善后的执行时间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mi>e</mi><mi>x</mi><mo>=</mo><mi>T</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>r</mi><mo stretchy="false">)</mo><mo>+</mo><mi>r</mi><mi mathvariant="normal">/</mi><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Tex=T((1-r)+r/a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord">/</span><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span></p>
<p>性能提高衡量指标：加速比 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mi>T</mi><mi mathvariant="normal">/</mi><mi>T</mi><mi>e</mi><mi>x</mi><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>r</mi><mo stretchy="false">)</mo><mo>+</mo><mi>r</mi><mi mathvariant="normal">/</mi><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">=T/Tex=1/((1-r)+r/a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">/</span><span class="mopen">(</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord">/</span><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span></p>
<p>实际中，一般问题规模越大，r 越大，加速效果越好，r 接近 1 时，加速比接近 a。</p>
<p><strong>结论1</strong>：加速效果与<mark>改进部分占总执行时间的比例</mark>有关。</p>
<p><strong>一道例题：</strong></p>
<p><img src="/common/img/loading.jpg" data-original="/2023/11/12/parallel-computer-architecture/Amdahl.png" alt="Amdahl例题"></p>
<p>理想情况下，作业可以均匀分解为 P 个子任务，在 P 台处理机上运行。但实际中，并行处理中存在不可分解成分，系统将以串-并-串的方式运行，子任务划分存在不均匀情况，还有串-并切换、并行任务分发，数据传输、同步等待等非计算开销。</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mi>p</mi></msub><mo>=</mo><mfrac><msub><mi>T</mi><mi>s</mi></msub><mrow><msub><mi>t</mi><mi>s</mi></msub><mo>+</mo><mfrac><mrow><msub><mi>T</mi><mi>s</mi></msub><mo>−</mo><msub><mi>t</mi><mi>s</mi></msub></mrow><mi>p</mi></mfrac></mrow></mfrac><mo>=</mo><mfrac><mi>p</mi><mrow><mfrac><msub><mi>t</mi><mi>s</mi></msub><msub><mi>T</mi><mi>s</mi></msub></mfrac><mi>p</mi><mo>+</mo><mn>1</mn><mo>−</mo><mfrac><msub><mi>t</mi><mi>s</mi></msub><msub><mi>T</mi><mi>s</mi></msub></mfrac></mrow></mfrac><mo>=</mo><mfrac><mi>p</mi><mrow><mi>α</mi><mi>p</mi><mo>+</mo><mn>1</mn><mo>−</mo><mi>α</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">S_p=\frac{T_s}{t_s+\frac{T_s-t_s}{p}}=\frac{p}{\frac{t_s}{T_s}p+1-\frac{t_s}{T_s}}=\frac{p}{\alpha p+1-\alpha}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.7045659999999998em;vertical-align:-0.8161349999999999em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8884309999999999em;"><span style="top:-2.5218849999999997em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.95445em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.466357142857143em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.23056em;"><span style="top:-2.3em;margin-left:-0.13889em;margin-right:0.1em;"><span class="pstrut" style="height:2.5em;"></span><span class="mord mathnormal mtight">s</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2em;"><span></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.23056em;"><span style="top:-2.3em;margin-left:0em;margin-right:0.1em;"><span class="pstrut" style="height:2.5em;"></span><span class="mord mathnormal mtight">s</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.48288571428571425em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8161349999999999em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.5322900000000002em;vertical-align:-0.7847900000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7475em;"><span style="top:-2.5560099999999997em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9057000000000001em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.23056em;"><span style="top:-2.3em;margin-left:-0.13889em;margin-right:0.1em;"><span class="pstrut" style="height:2.5em;"></span><span class="mord mathnormal mtight">s</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.466357142857143em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.23056em;"><span style="top:-2.3em;margin-left:0em;margin-right:0.1em;"><span class="pstrut" style="height:2.5em;"></span><span class="mord mathnormal mtight">s</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4868571428571429em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mord mathnormal mtight">p</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9057000000000001em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.23056em;"><span style="top:-2.3em;margin-left:-0.13889em;margin-right:0.1em;"><span class="pstrut" style="height:2.5em;"></span><span class="mord mathnormal mtight">s</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.466357142857143em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.23056em;"><span style="top:-2.3em;margin-left:0em;margin-right:0.1em;"><span class="pstrut" style="height:2.5em;"></span><span class="mord mathnormal mtight">s</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4868571428571429em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7847900000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.228608em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7475em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.0037em;">α</span><span class="mord mathnormal mtight">p</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight" style="margin-right:0.0037em;">α</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<p>假设处理机的数目增大到无穷，加速比上限 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mi>p</mi></msub><mo>=</mo><mfrac><mn>1</mn><mi>α</mi></mfrac></mrow><annotation encoding="application/x-tex">S_p=\frac{1}{\alpha}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.0037em;">α</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>，与串行占比 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span> 成反比。</p>
<p><strong>结论2</strong>：任务规模固定时，在某个处理器数时，会达到<mark>加速比上限</mark>，再增加处理器个数没有意义。</p>
<h4 id="gustafson-定律"><a class="markdownIt-Anchor" href="#gustafson-定律"></a> Gustafson 定律</h4>
<p>适用于<mark>可扩展问题</mark>，每个节点处理负载不变（时间不变），负载增加的处理时间加速比。</p>
<ul>
<li>n：处理器个数，即问题规模扩大 n 倍。</li>
<li>a：n 个处理器并行执行时，能改善部分的并行时间所占比例。</li>
<li>Tex：系统改善后的执行时间</li>
<li>T：系统改善前的全部执行时间</li>
</ul>
<p>加速比 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mi>p</mi></msub><mo>=</mo><mfrac><mi>T</mi><mrow><mi>T</mi><mi>e</mi><mi>x</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>a</mi><mo stretchy="false">)</mo><mo>+</mo><mi>a</mi><mi>n</mi></mrow><mn>1</mn></mfrac><mo>=</mo><mn>1</mn><mo>+</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">S_p=\frac{T}{Tex}=\frac{(1-a)+an}{1}=1+(n-1)a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">a</span><span class="mclose mtight">)</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord mathnormal">a</span></span></span></span></p>
<p><strong>结论3</strong>：随着问题规模增加，如果每个处理器处理数据规模一定，即 a 不变，加速比和 n 有关。</p>
<h3 id="并行计算机粒度模型"><a class="markdownIt-Anchor" href="#并行计算机粒度模型"></a> 并行计算机粒度模型</h3>
<ul>
<li>粒度：衡量计算<mark>任务所含计算量</mark>的尺度。</li>
<li>R 表示程序执行时间，C 表示用于通信/访存的开销，用 <mark>R/C 比值</mark>衡量任务粒度大小尺度。
<ul>
<li>粗粒度：R/C 比值比较大。每个单位计算只需要少量的通信/访存。<mark>计算量大，通信/访存少</mark>。</li>
<li>细粒度：R/C 比值比较小。每个单位需要很大通信量和其它开销。<mark>计算量少，通信/访存多</mark>。</li>
</ul>
</li>
</ul>
<p>对软件而言，要提高计算速度，细粒度并行需要减少访问延迟、高带宽，而粗粒度并行性需要高处理性能。</p>
<ul>
<li>PVP、SMP
<ul>
<li>通信/访存带宽高，细粒度硬件平台。</li>
<li>适合细粒度/粗粒度并行任务。</li>
</ul>
</li>
<li>MPP、DSM、COW
<ul>
<li>通信带宽低，粗粒度硬件平台。</li>
<li>只适合粗粒度并行任务。</li>
</ul>
</li>
</ul>
<p>如果处理器计算速度快，数据访问或传输慢，适合用粗粒度计算，才能最大化发挥资源利用率，提高系统性能，加快并行程序执行速度。</p>
<p><strong>两台处理机系统的任务分配</strong></p>
<ul>
<li>M 为子任务总数</li>
<li>M-K、K为两台机器任务分配数</li>
<li>假设子任务之间都要进行同样数据交换</li>
</ul>
<p>总处理时间<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mi>R</mi><mo>∗</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mi>M</mi><mo>−</mo><mi>K</mi><mo separator="true">,</mo><mi>K</mi><mo stretchy="false">)</mo><mo>+</mo><mi>C</mi><mo stretchy="false">(</mo><mi>M</mi><mo>−</mo><mi>K</mi><mo stretchy="false">)</mo><mi>K</mi></mrow><annotation encoding="application/x-tex">=R*max(M-K,K)+C(M-K)K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">a</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span>，两台处理机上任务执行时间取最大，处理及内通信开销0，处理机间通信开销 C。</p>
<p><strong>结论</strong> ：当 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi mathvariant="normal">/</mi><mi>C</mi><mo>&lt;</mo><mi>M</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">R/C&lt;M/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord">/</span><span class="mord">2</span></span></span></span> 时，把所有任务分配给同一台处理机，总处理时间最小；当 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi mathvariant="normal">/</mi><mi>C</mi><mo>&gt;</mo><mi>M</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">R/C&gt;M/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord">/</span><span class="mord">2</span></span></span></span> 时，把任务平均地分配给两台处理机，总处理时间最小。任务分配参数分别为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">K=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>或<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>=</mo><mi>M</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">K=M/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord">/</span><span class="mord">2</span></span></span></span>（M为奇数时，K尽可能接近 M/2）。</p>
<p><strong>N 台处理机系统的任务分配</strong></p>
<p>总处理时间<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><msub><mi>R</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>K</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>+</mo><mi>C</mi><mi mathvariant="normal">/</mi><mn>2</mn><msub><mo>∑</mo><mi>i</mi></msub><msub><mi>K</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>M</mi><mo>−</mo><msub><mi>K</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mi>R</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>K</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>+</mo><mi>C</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">(</mo><msup><mi>M</mi><mn>2</mn></msup><mo>−</mo><msub><mo>∑</mo><mi>i</mi></msub><msubsup><mi>K</mi><mi>i</mi><mn>2</mn></msubsup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">=R_{max}(K_i)+C/2\sum_iK_i(M-K_i)=R_{max}(K_i)+C/2(M^2-\sum_iK_i^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.0497100000000001em;vertical-align:-0.29971000000000003em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord">/</span><span class="mord">2</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16195399999999993em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord">/</span><span class="mord">2</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.113818em;vertical-align:-0.29971000000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16195399999999993em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.441336em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.258664em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">K_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>表示分配给第 i 台处理机的任务。</p>
<ul>
<li>
<p>若所有任务分配给一台处理机，总处理时间<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mi>R</mi><mo>∗</mo><mi>M</mi></mrow><annotation encoding="application/x-tex">=R*M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span>。</p>
</li>
<li>
<p>若所有任务平均分配给 N 台处理机，总处理时间<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mfrac><mrow><mi>R</mi><mi>M</mi></mrow><mi>N</mi></mfrac><mo>+</mo><mfrac><mrow><mi>C</mi><msup><mi>M</mi><mn>2</mn></msup></mrow><mn>2</mn></mfrac><mo>−</mo><mfrac><mrow><mi>C</mi><msup><mi>M</mi><mn>2</mn></msup></mrow><mrow><mn>2</mn><mi>N</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">=\frac{RM}{N}+\frac{CM^2}{2}-\frac{CM^2}{2N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.36292em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01792em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.36292em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01792em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
</li>
</ul>
<p>当 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>R</mi><mi>M</mi></mrow><mi>N</mi></mfrac><mo>+</mo><mfrac><mrow><mi>C</mi><msup><mi>M</mi><mn>2</mn></msup></mrow><mn>2</mn></mfrac><mo>−</mo><mfrac><mrow><mi>C</mi><msup><mi>M</mi><mn>2</mn></msup></mrow><mrow><mn>2</mn><mi>N</mi></mrow></mfrac><mo>≤</mo><mi>R</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">\frac{RM}{N}+\frac{CM^2}{2}-\frac{CM^2}{2N}\leq RM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.36292em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01792em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.36292em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01792em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span>，有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>R</mi><mi>C</mi></mfrac><mo>≥</mo><mfrac><mi>M</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{R}{C}\geq\frac{M}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<p>加速比<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mfrac><mrow><mi>R</mi><mi>M</mi></mrow><mrow><mfrac><mrow><mi>R</mi><mi>M</mi></mrow><mi>N</mi></mfrac><mo>+</mo><mfrac><mrow><mi>C</mi><msup><mi>M</mi><mn>2</mn></msup></mrow><mn>2</mn></mfrac><mo>−</mo><mfrac><mrow><mi>C</mi><msup><mi>M</mi><mn>2</mn></msup></mrow><mrow><mn>2</mn><mi>N</mi></mrow></mfrac></mrow></mfrac><mo>=</mo><mfrac><mrow><mn>2</mn><mi>R</mi></mrow><mrow><mfrac><mrow><mn>2</mn><mi>R</mi></mrow><mi>N</mi></mfrac><mo>+</mo><mfrac><mrow><mi>M</mi><mi>C</mi><mo stretchy="false">(</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mi>N</mi></mfrac></mrow></mfrac></mrow><annotation encoding="application/x-tex">=\frac{RM}{\frac{RM}{N}+\frac{CM^2}{2}-\frac{CM^2}{2N}}=\frac{2R}{\frac{2R}{N}+\frac{MC(N-1)}{N}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.6611509999999998em;vertical-align:-0.7888199999999999em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.4519800000000003em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8720928571428572em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0543142857142858em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9384399999999999em;"><span style="top:-2.93844em;margin-right:0.1em;"><span class="pstrut" style="height:2.64444em;"></span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0543142857142858em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9384399999999999em;"><span style="top:-2.93844em;margin-right:0.1em;"><span class="pstrut" style="height:2.64444em;"></span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7888199999999999em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.6495809999999997em;vertical-align:-0.7772499999999998em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.4635500000000006em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8720928571428572em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0377857142857143em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.5020714285714285em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7772499999999998em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<p>当 N 无限大时，加速比趋近于常数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mn>2</mn><mi>R</mi></mrow><mrow><mi>M</mi><mi>C</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{2R}{MC}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> 。</p>
<p><strong>结论</strong>：R/C 比 M/2 大，应尽量均分任务；R/C 比 M/2 小，应尽量只用一台处理机。</p>
<p>假设通信开销与处理机数目成正比例，执行时间<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mi>R</mi><mo>∗</mo><mi>M</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><msub><mi>K</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>+</mo><mi>C</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">=R*Max(K_i)+CN</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">a</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></p>
<p>若任务平均分配，当处理机数目从N加到 N+1 时，执行时间减少量为：</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mfrac><mrow><mi>R</mi><mi>M</mi></mrow><mi>N</mi></mfrac><mo>+</mo><mi>C</mi><mi>N</mi><mo stretchy="false">)</mo><mo>−</mo><mo stretchy="false">(</mo><mfrac><mrow><mi>R</mi><mi>M</mi></mrow><mrow><mi>N</mi><mo>+</mo><mn>1</mn></mrow></mfrac><mo>+</mo><mi>C</mi><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mfrac><mrow><mi>R</mi><mi>M</mi></mrow><mi>N</mi></mfrac><mo>−</mo><mfrac><mrow><mi>R</mi><mi>M</mi></mrow><mrow><mi>N</mi><mo>+</mo><mn>1</mn></mrow></mfrac><mo stretchy="false">)</mo><mo>−</mo><mi>C</mi><mo>=</mo><mfrac><mrow><mi>R</mi><mi>M</mi></mrow><mrow><mi>N</mi><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mfrac><mo>−</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">(\frac{RM}{N}+CN)-(\frac{RM}{N+1}+C(N+1))=(\frac{RM}{N}-\frac{RM}{N+1})-C=\frac{RM}{N(N+1)}-C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.275662em;vertical-align:-0.403331em;"></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.403331em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.275662em;vertical-align:-0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.403331em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.392331em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></p>
<p>当不减少时，有<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><msqrt><mfrac><mrow><mi>R</mi><mi>M</mi></mrow><mi>C</mi></mfrac></msqrt></mrow><annotation encoding="application/x-tex">N=\sqrt{\frac{RM}{C}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.84em;vertical-align:-0.5913344999999999em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2486655000000002em;"><span class="svg-align" style="top:-3.8em;"><span class="pstrut" style="height:3.8em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.2086655em;"><span class="pstrut" style="height:3.8em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.8800000000000001em;"><svg width="400em" height="1.8800000000000001em" viewbox="0 0 400000 1944" preserveaspectratio="xMinYMin slice"><path d="M983 90
l0 -0
c4,-6.7,10,-10,18,-10 H400000v40
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5913344999999999em;"><span></span></span></span></span></span></span></span></span>。</p>
<p>并行程序设计中应该尽量<mark>隐藏或减少通信开销</mark>：</p>
<ul>
<li>采用通信与计算过程重叠（<mark>流水并行</mark>）优化方法。</li>
<li>通过<mark>硬件/软件</mark>减少通信开销。</li>
</ul>
<p>要增加并行度，R/C 会变小；但为了避免通信开销太大，希望 R/C 足够大，可并行度会减少。</p>
<h3 id="roofline-模型"><a class="markdownIt-Anchor" href="#roofline-模型"></a> Roofline 模型</h3>
<ul>
<li>算力 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span></span>：每秒最大浮点运算数。</li>
<li>带宽<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span></span></span></span>：每秒最大访存带宽。</li>
<li>计算强度上限 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>=</mo><mfrac><mi>π</mi><mi>β</mi></mfrac></mrow><annotation encoding="application/x-tex">I_{max}=\frac{\pi}{\beta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1764999999999999em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.695392em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05278em;">β</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>，访存获取的单位数据最多可以用来进行多少次计算。</li>
<li>理论性能 P：算法模型在计算平台上能达到的理论峰值计算量。</li>
</ul>
<p><mark>算力决定屋顶高度，带宽决定房檐斜率。</mark></p>
<p><img src="/common/img/loading.jpg" data-original="/2023/11/12/parallel-computer-architecture/roofline.png" alt="roofline模型"></p>
<p>当计算强度没有达到上限时，位于<mark>存储瓶颈区</mark>，主要是访存太慢，要优化访存，使得房檐变陡。</p>
<p>当达到理论峰值时，位于<mark>计算瓶颈区</mark>，主要是算力不够，要优化算法进一步发挥处理器性能，或换更好的处理器。</p>
<h2 id="三-多处理器-cache-一致性"><a class="markdownIt-Anchor" href="#三-多处理器-cache-一致性"></a> 三、多处理器 Cache 一致性</h2>
<h3 id="cache-一致性问题"><a class="markdownIt-Anchor" href="#cache-一致性问题"></a> Cache 一致性问题</h3>
<p>在单机系统中，写 Cache  会引发 Cache 与主存的数据不一致，当发生 I/O 读时，主存和 Cache 数据不同就导致了矛盾。一般可以通过<mark>直写法WT</mark>或<mark>回写法WB</mark>来解决。</p>
<ul>
<li>WT 在修改 Cache 的同时立即修改主存，访存写性能低，增加总线负载。</li>
<li>WB 被修改的Cache 在被替换时写回主存，使得长时间主存和Cache数据不一致，可靠性低。</li>
</ul>
<p>而在多机系统中，也存在数据的不一致。</p>
<ul>
<li><mark>共享数据写</mark>操作会引发Cache与主存以及Cache之间的数据不一致。</li>
<li><mark>进程迁移</mark>会读取不一致的数据。</li>
<li><mark>I/O操作</mark>将新的数据写入主存或直接从主存输出数据，会导致不一致。</li>
</ul>
<p>单纯的 WT 和 WB 不能保证多处理机的多副本一致性。</p>
<h3 id="cache-一致性维护策略"><a class="markdownIt-Anchor" href="#cache-一致性维护策略"></a> Cache 一致性维护策略</h3>
<p>及时更新或作废主存和其它 Cache 中的数据。</p>
<ul>
<li><mark>更新法</mark>，开销大，代价高，控制复杂，一般不用。
<ul>
<li>基于 WT</li>
<li>基于 WB</li>
</ul>
</li>
<li><mark>作废法</mark>。
<ul>
<li>基于 WT</li>
<li>基于 WB</li>
</ul>
</li>
</ul>
<p>要根据多处理机系统互连网络结构，采用不同的方法维护 Cache 之间、Cache 与主存一致性。</p>
<ul>
<li><mark>播写法</mark>，基于<mark>总线监听</mark>协议，广播写操作，适合总线结构。
<ul>
<li>某一 PE 修改自己内部 Cache 时，采用广播方法将内容及地址由公共总线发送。</li>
<li>其他 PE 要随时监听总线，一旦发现修改信息就记录下来，且进行相应处理。</li>
</ul>
</li>
<li><mark>目录表法</mark>，适合非总线互连网结构。
<ul>
<li>为 Cache 及主存建目录表，保存一致性所需的信息，指明副本位置、状态等。</li>
</ul>
</li>
</ul>
<h3 id="监听总线协议"><a class="markdownIt-Anchor" href="#监听总线协议"></a> 监听总线协议</h3>
<p>基于总线的多处理机系统中，处理器可通过总线检测到所有对存储器正在进行的活动，如果总线业务破坏了本地 Cache 数据块一致性状态，Cache 控制器就应该采取相应动作使本地副本更新或无效。</p>
<ul>
<li>基于 WT 策略
<ul>
<li>作废法：当 P1 修改其 Cache 中的 X 为 X‘ 后，直写主存，由总线使其他高速缓存中的 X 均无效。</li>
<li>更新法：当 P1 修改其 Cache 中的 X 为 X‘ 后，直写主存，总线广播 X’ 至其他高速缓存中。</li>
</ul>
</li>
<li>基于 WB 策略
<ul>
<li>作废法：当 P1 修改其 Cache 中的 X 为 X‘ 后，回写主存，由总线使其他高速缓存及主存中的 X 均无效。</li>
<li>更新法：当 P1 修改其 Cache 中的 X 为 X‘ 后，总线广播 X’ 至其他高速缓存中，而主存中 X 无效。</li>
</ul>
</li>
</ul>
<p>典型的一致性维护数据副本状态协议基于<mark>作废法</mark>，更新法开销大、代价高、控制复杂，一般不用。</p>
<h4 id="2-状态-cache-协议-si-协议"><a class="markdownIt-Anchor" href="#2-状态-cache-协议-si-协议"></a> 2 状态 Cache 协议    SI 协议</h4>
<p><img src="/common/img/loading.jpg" data-original="/2023/11/12/parallel-computer-architecture/SI.png" alt="SI协议"></p>
<p>两状态没考虑唯一正确数据块的情况，只能先写回主存，再从主存读取数据块，效率低。</p>
<h4 id="3-状态-cache-协议-msi-协议"><a class="markdownIt-Anchor" href="#3-状态-cache-协议-msi-协议"></a> 3 状态 Cache 协议    MSI 协议</h4>
<img src="/common/img/loading.jpg" data-original="/2023/11/12/parallel-computer-architecture/MSI.jpg" alt="MSI协议" style="zoom:50%;">
<p>三状态协议能很好地支持 Cache 之间的高速数据传递，但没有考虑程序执行过程中的特点。</p>
<h4 id="4-状态-cache-协议-mesi-协议"><a class="markdownIt-Anchor" href="#4-状态-cache-协议-mesi-协议"></a> 4 状态 Cache 协议    MESI 协议</h4>
<p>WT 策略每次都要修改主存，总线流量大；WB 策略在 Cache 写一次后，主存中内容就不一致。</p>
<p>考虑到顺序程序可能就写一次，循环程序不止写一次，为了减少发生失效的次数和各 Cache 的变换次数，基于程序执行特点，引出 <mark>Write-Once</mark> 思想。</p>
<ul>
<li>第一次写，采用 WT 。
<ul>
<li>有一个以上副本正确，针对顺序程序。</li>
</ul>
</li>
<li>而后的写，采用 WB 。
<ul>
<li>只有一个副本正确，针对循环程序。</li>
</ul>
</li>
</ul>
<p>为了区分第一次写，把三状态中的 M 分为两个状态。</p>
<ul>
<li>S：共享状态。多个 Cache 和主存一致。</li>
<li>I：无效状态。</li>
<li>E：只被写过一次。仅一个 Cache 和主存一致。</li>
<li>M：不止被写过一次。唯一正确的在该 Cache 中。</li>
</ul>
<p><img src="/common/img/loading.jpg" data-original="/2023/11/12/parallel-computer-architecture/MESI.png" alt="MESI协议"></p>
<h4 id="5-状态-cache-协议-moesi协议"><a class="markdownIt-Anchor" href="#5-状态-cache-协议-moesi协议"></a> 5 状态 Cache 协议    MOESI协议</h4>
<p><mark>数据拥塞</mark>：当其他 CPU 请求数据时，S 状态下的哪一个 CPU 发送数据？</p>
<p>SMP 中，可以通过总线监听和总线使用权仲裁解决。</p>
<p>ccNUMA中，通过仲裁机制解决效率低、复杂、成本高。</p>
<p>因此提出增加一个特殊状态，由具有特殊状态的 Cache 发送数据。</p>
<p><strong>MOESI</strong>：在 MESI 的基础上引入 O 状态，对 S 状态进行重定义。</p>
<p><mark>唯一正确的 M 状态数据副本发送数据，状态变为 O，此后由 O 状态数据副本发送数据。</mark></p>
<ul>
<li>CPU 写操作、本地 Cache 命中，本地状态为
<ul>
<li>E 或 M：数据直接写入 Cache，状态改为 M。</li>
<li>S：数据直接写入 Cache，状态改为 M；同时其他 CPU 中该数副本 Cache 行状态从S变为 I。</li>
<li>O：数据直接写入 Cache，状态改为 M；同时其他 CPU 中该数副本 Cache 行状态从S变为 I。</li>
</ul>
</li>
<li>CPU A 写操作、本地 Cache 没命中，CPU B 中命中，B 的状态为
<ul>
<li>E：Cache 行状态改为 I；A 从主存申请一个 Cache 行写入数据，状态为 M。</li>
<li>S：Cache 行状态改为 I，同样副本的其他 CPU 数据副本也改为 I；A 从主存申请一个 Cache 行写入数据，状态为 M。</li>
<li>M：将数据回写主存，Cache 行状态改为 I。A 从主存申请一个 Cache 行写入数据，状态为 M。</li>
<li>O：将数据回写主存，Cache 行状态改为 I，同样副本的其他 CPU 数据副本也改为 I；A 从主存申请一个 Cache 行写入数据，状态为 M。</li>
</ul>
</li>
<li>CPU 读操作、本地 Cache 命中
<ul>
<li>数据从本地直接读取，状态不变。</li>
</ul>
</li>
<li>CPU A 读操作、本地 Cache 没命中，CPU B 命中，B 的状态为
<ul>
<li>M：Cache 行状态改为 O，同时 CPU B 将数据传送给 CPU A，CPU A状态改为 S。</li>
<li>O：Cache 行状态不变，同时 CPU B 将数据传送给 CPU A，CPU A状态改为 S。</li>
</ul>
</li>
</ul>
<p><strong>一个问题：为什么 I 状态第一次写就变成 M，不应该先变成 M 吗？</strong></p>
<p><mark>看图的描述</mark></p>
<img src="/common/img/loading.jpg" data-original="/2023/11/12/parallel-computer-architecture/MOESI.png" alt="MOESI协议" style="zoom: 80%;">
<img src="/common/img/loading.jpg" data-original="/2023/11/12/parallel-computer-architecture/MOESI2.png" alt="MOESI协议" style="zoom: 80%;">
<h3 id="目录表协议"><a class="markdownIt-Anchor" href="#目录表协议"></a> 目录表协议</h3>
<p>监听协议仅适合总线连接多处理机，互连网络连接的多处理机使用基于目录的协议。</p>
<p>目录记录共享数据的<mark>所有 Cache</mark>存数据行的位置与状态。</p>
<ul>
<li><strong>目录表</strong>：存放与共享数据块副本相关的数据（目录项），可以集中存放或分散存放。</li>
<li><strong>目录项</strong>：每个数据块一个目录项。
<ul>
<li>包含多个指向该数据块<mark>多个远程副本地址</mark>的指针。</li>
<li>一个<mark>重写位</mark>，用于说明是否有 Cache 被允许数据块写入。</li>
</ul>
</li>
<li><strong>基于目录的协议</strong>
<ul>
<li><mark>全映射目录</mark>、<mark>有限目录</mark>、<mark>链式目录</mark></li>
<li>不同目录协议差异在于目录表的格式及对目录表的管理。</li>
</ul>
</li>
</ul>
<h4 id="全映射目录"><a class="markdownIt-Anchor" href="#全映射目录"></a> 全映射目录</h4>
<p><mark>共享存储器</mark>中的目录里，每个目录项有 N 个<mark>处理机指针位</mark>和1个<mark>重写位 C</mark>。</p>
<ul>
<li>处理机指针位：表示相应处理机Cache中是否存在该数据块副本。</li>
<li>重写位：表示有且仅有一个处理机指针位为 1，且该处理机可对该块进行写操作。</li>
</ul>
<p>Cache 中，当使用 2 状态 SI 协议时，每个数据块有两个状态位。</p>
<ul>
<li>有效位</li>
<li>是否允许写位。</li>
</ul>
<p><img src="/common/img/loading.jpg" data-original="/2023/11/12/parallel-computer-architecture/%E5%85%A8%E6%98%A0%E5%B0%84%E7%9B%AE%E5%BD%95.png" alt="全映射目录"></p>
<p>当 P3 要求写单元 X 时：</p>
<ol>
<li>Cache 有效，但不允许写。</li>
<li>向包含 X 的存储器模块发送写请求，等待回应。</li>
<li>存储器模型向 C1、C2发送无效请求。</li>
<li>C1 和 C2 接到无效请求后，将对应块置为无效态，并向存储器模块发出回答信号。</li>
<li>存储器模块接到回答信号，清楚指向 C1 和 C2 的指针，重写位置 1，发允许写信号到 C3。</li>
<li>C3 接收到允许写信号，激活 P3 开始写 X 单元，更新 Cache 状态。</li>
<li>写完后，重写位复位 0。</li>
</ol>
<p>全映射目录速度快、效率高，但目录表大、空间浪费大。</p>
<h4 id="有限目录"><a class="markdownIt-Anchor" href="#有限目录"></a> 有限目录</h4>
<p>由于<mark>同时刻的副本数不会太多</mark>，可以限制数据块副本的数量，减少目录表大小。</p>
<p>因此也会产生数据块副本数目大于目录表项的问题，要采取<mark>目录副本指针替换算法</mark>。</p>
<p>有限目录表小、节省空间，但副本数较多时会降低效率，替换算法很关键。</p>
<h4 id="链式目录"><a class="markdownIt-Anchor" href="#链式目录"></a> 链式目录</h4>
<p>链式目录允许任意数目副本，通过链表实现副本指针的扩展。</p>
<p>对副本的查询、删除等操作按链式数据结构方法进行。</p>
<p>链式目录表占存储空间小，但查表时间长，为了加快链式查表过程，可以采用双向链。</p>
<p>链式目录表最小、副本数可扩展，但链表目录查询、删除开销大。</p>
<h3 id="ccnuma-的-mesif-协议"><a class="markdownIt-Anchor" href="#ccnuma-的-mesif-协议"></a> ccNUMA 的 MESIF 协议</h3>
<p>MESIF 协议 主要解决 ccNUMA 架构中 SMP 子系统之间 L3 Cache 一致性的问题。</p>
<p>在 ccNUMA 中使用<mark>目录表协议</mark>，不能使用总线监听协议。</p>
<p>MESIF 引入 F 状态：</p>
<ul>
<li>多个处理器 Cache 副本中只有 1 个 Cache 行状态为 F，其他为 S。</li>
<li><mark>Cache 行状态为 F 时，Cache 中数据与存储器一致。</mark></li>
<li>只有 F 状态的 Cache 行可以转发数据副本。</li>
<li>F 状态的数据副本被其他 CPU 拷贝时，新副本变为 F，老副本变为 S。</li>
<li>F 状态的数据副本被改写后，状态为 S 的其他副本置 I ，该 Cache 行变为 M。</li>
</ul>
<p>Cache 一致性维护中，关键是解决<mark>减轻网络负载</mark>和<mark>多副本同时写操作冲突</mark>问题。</p>
<p>对连续处理倾向的进程，作废法较好；对多个处理器频繁交换处理的进程，更新法较好。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">七年</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2023/11/12/parallel-computer-architecture/">http://example.com/2023/11/12/parallel-computer-architecture/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">年雨冰季</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/">体系结构</a></div><div class="post_share"><div class="social-share" data-image="https://s1.imagehub.cc/images/2023/09/30/avatar.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2023/10/17/sycl-learn/" title="Data Parallel CPP 学习笔记"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Data Parallel CPP 学习笔记</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s1.imagehub.cc/images/2023/09/30/avatar.jpeg" onerror="this.onerror=null;this.src='/common/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">七年</div><div class="author-info__description">夜阑风静欲归时，唯有一江明月碧琉璃。</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/XDUqinian" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://1841128521@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text"> 一、概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E7%9B%B8%E5%85%B3%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80"><span class="toc-number">2.</span> <span class="toc-text"> 二、相关理论基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9A%84%E5%B9%B6%E8%A1%8C%E6%80%A7"><span class="toc-number">2.1.</span> <span class="toc-text"> 计算机的并行性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">2.2.</span> <span class="toc-text"> 计算机体系结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%E5%88%86%E7%B1%BB%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.3.</span> <span class="toc-text"> 概念分类模型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#flynn-%E5%88%86%E7%B1%BB%E6%B3%95"><span class="toc-number">2.3.1.</span> <span class="toc-text"> Flynn 分类法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%93%E6%9E%84%E7%9A%84%E6%8A%80%E6%9C%AF%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.4.</span> <span class="toc-text"> 并行计算机结构的技术模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9A%84%E8%AE%BF%E5%AD%98%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.5.</span> <span class="toc-text"> 并行计算机的访存模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.6.</span> <span class="toc-text"> 并行计算性能分析模型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#amdahl-%E5%AE%9A%E5%BE%8B"><span class="toc-number">2.6.1.</span> <span class="toc-text"> Amdahl 定律</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gustafson-%E5%AE%9A%E5%BE%8B"><span class="toc-number">2.6.2.</span> <span class="toc-text"> Gustafson 定律</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B2%92%E5%BA%A6%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.7.</span> <span class="toc-text"> 并行计算机粒度模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#roofline-%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.8.</span> <span class="toc-text"> Roofline 模型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-%E5%A4%9A%E5%A4%84%E7%90%86%E5%99%A8-cache-%E4%B8%80%E8%87%B4%E6%80%A7"><span class="toc-number">3.</span> <span class="toc-text"> 三、多处理器 Cache 一致性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cache-%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98"><span class="toc-number">3.1.</span> <span class="toc-text"> Cache 一致性问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cache-%E4%B8%80%E8%87%B4%E6%80%A7%E7%BB%B4%E6%8A%A4%E7%AD%96%E7%95%A5"><span class="toc-number">3.2.</span> <span class="toc-text"> Cache 一致性维护策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%91%E5%90%AC%E6%80%BB%E7%BA%BF%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.3.</span> <span class="toc-text"> 监听总线协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%8A%B6%E6%80%81-cache-%E5%8D%8F%E8%AE%AE-si-%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.3.1.</span> <span class="toc-text"> 2 状态 Cache 协议    SI 协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%8A%B6%E6%80%81-cache-%E5%8D%8F%E8%AE%AE-msi-%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.3.2.</span> <span class="toc-text"> 3 状态 Cache 协议    MSI 协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E7%8A%B6%E6%80%81-cache-%E5%8D%8F%E8%AE%AE-mesi-%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.3.3.</span> <span class="toc-text"> 4 状态 Cache 协议    MESI 协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E7%8A%B6%E6%80%81-cache-%E5%8D%8F%E8%AE%AE-moesi%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.3.4.</span> <span class="toc-text"> 5 状态 Cache 协议    MOESI协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E8%A1%A8%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.4.</span> <span class="toc-text"> 目录表协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E6%98%A0%E5%B0%84%E7%9B%AE%E5%BD%95"><span class="toc-number">3.4.1.</span> <span class="toc-text"> 全映射目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E9%99%90%E7%9B%AE%E5%BD%95"><span class="toc-number">3.4.2.</span> <span class="toc-text"> 有限目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%93%BE%E5%BC%8F%E7%9B%AE%E5%BD%95"><span class="toc-number">3.4.3.</span> <span class="toc-text"> 链式目录</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ccnuma-%E7%9A%84-mesif-%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.5.</span> <span class="toc-text"> ccNUMA 的 MESIF 协议</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('https://s1.imagehub.cc/images/2023/09/30/home_banner.jpeg')"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2023 By 七年</div><div class="footer_custom_text">夜阑风静欲归时，唯有一江明月碧琉璃。</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"></div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div>
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(r){r.imageLazyLoadSetting.processImages=t;var e=r.imageLazyLoadSetting.isSPA,n=r.imageLazyLoadSetting.preloadRatio||1,c=a();function a(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(){e&&(c=a());for(var t,o=0;o<c.length;o++)0<=(t=(t=c[o]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(r.innerHeight*n||document.documentElement.clientHeight*n)&&function(){var t,e,n,a,i=c[o];e=function(){c=c.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(n=new Image,a=t.getAttribute("data-original"),n.onload=function(){t.src=a,t.removeAttribute("data-original"),e&&e()},t.src!==a&&(n.src=a))}()}function i(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",i),r.addEventListener("resize",i),r.addEventListener("orientationchange",i)}(this);</script></body></html>